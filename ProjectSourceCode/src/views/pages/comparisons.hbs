{{> navbar}}
{{> message}}

<div class="container mt-4">
    {{#if ticketMaster}}
    <div class="mb-4">
        <h2>{{ticketMaster.name}}</h2>
        <p>
            {{#if ticketMaster.date.start}}<strong>Date:</strong> {{ticketMaster.date.start}} {{#if
            ticketMaster.date.time}}at {{ticketMaster.date.time}}{{/if}} | {{/if}}
            {{#if ticketMaster.venue.city}}<strong>Location:</strong> {{ticketMaster.venue.city}},
            {{ticketMaster.venue.stateCode}}{{/if}}
        </p>
        {{#if ticketMaster.images.[0].url}}
        <img src="{{ticketMaster.images.[0].url}}" alt="{{ticketMaster.name}}"
            style="max-width: 300px; margin-bottom: 20px;">
        {{/if}}
    </div>
    {{/if}}

    <h3 class="mb-3">Available Tickets on Different Platforms</h3>

    {{#if listings.length}}
    <div class="row">
        {{#each listings}}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">
                        {{#if this.source}}{{this.source}}{{else}}Ticket Seller{{/if}}
                    </h5>

                    {{#if this.price}}
                    <p class="card-text">
                        <strong>Price:</strong>
                        {{#if this.price.currency}}{{this.price.currency}} {{/if}}
                        {{this.price}}
                    </p>
                    {{/if}}

                    {{#if this.event_name}}
                    <p class="card-text">
                        <small class="text-muted"><strong>Event:</strong> {{this.event_name}}</small>
                    </p>
                    {{/if}}

                    {{#if this.event_date}}
                    <p class="card-text">
                        <small class="text-muted"><strong>Date:</strong> {{this.event_date}}</small>
                    </p>
                    {{/if}}

                    {{#if this.venue}}
                    <p class="card-text">
                        <small class="text-muted"><strong>Venue:</strong> {{this.venue}}</small>
                    </p>
                    {{/if}}
                </div>
                <div class="card-footer bg-white text-center">
                    {{#if this.url}}
                    <a href="{{this.url}}" target="_blank" class="btn btn-primary btn-sm">Buy Tickets</a>
                    {{else}}
                    <a href="{{this.link}}" target="_blank" class="btn btn-primary btn-sm">Buy Tickets</a>
                    {{/if}}
                </div>
            </div>
        </div>
        {{/each}}
    </div>
    {{else}}
    <div class="alert alert-info">
        {{#if message}}{{message}}{{else}}No additional ticket sellers found{{/if}}
    </div>
    {{/if}}
</div>